<div class="simple" fxLayout="column">
  <div
    class="header accent p-16"
    fxLayout="column"
    fxLayoutAlign="start"
    fxLayout.gt-xs="row"
    fxLayoutAlign.gt-xs="space-between center"
  >
    <div fxLayout="row" fxLayoutAlign="start center">
      <div class="logo" fxLayout="row" fxLayoutAlign="start center">
        <mat-icon class="logo-icon mr-16" [@animate]="{value: '*', params: {delay: '50ms', scale: '0.2'}}">
          account_box
        </mat-icon>
        <span class="logo-text h1" [@animate]="{value: '*', params: {delay: '100ms', x: '-25px'}}">
          {{ 'FILE_MANAGER.TITLE' | translate }}
        </span>
      </div>
    </div>
    <button mat-raised-button class="reference-button mt-16 mt-sm-0" (click)="synchronizeFiles()">
      <mat-icon class="mr-8">sync</mat-icon>
      <span>{{ 'ACTIONS.SYNC' | translate }}</span>
    </button>
  </div>
  <div class="content">
    <div *ngIf="loading" class="spinner-container" fxLayout="row" fxLayoutAlign="center center">
      <mat-spinner color="accent"></mat-spinner>
    </div>
    <div *ngIf="!loading">
      <div fxLayout="column">
        <div class="mr-16 ml-16 mt-8">
          <mat-form-field class="w-100-p">
            <input matInput [placeholder]="'FILE_MANAGER.SEARCH_PLACEHOLDER' | translate" [formControl]="searchInput" />
          </mat-form-field>
        </div>
        <div fxLayout="row wrap" class="files-container">
          <div
            class="icon-holder m-16"
            fxLayout="column"
            fxLayoutAlign="center center"
            *ngFor="let file of files; trackBy: trackByFn"
            (click)="selectFile(file)"
          >
            <div
              class="icon-holder__image"
              [class.icon-holder__selected]="selectedFile && selectedFile.path === file.path"
              [ngSwitch]="file.ext"
            >
              <ng-container *ngSwitchCase="FileExtension.psd">
                <img class="image-placeholder" [src]="'../assets/icons/custom/psd.png'" [alt]="file.title" />
                <div class="icon-name secondary-text mt-8">{{ file.name }}</div>
              </ng-container>
              <ng-container *ngSwitchDefault>
                <img
                  [src]="file.path"
                  onerror="this.src='../assets/icons/custom/placeholder.png';"
                  [alt]="file.title"
                />
                <div class="icon-name secondary-text mt-8">{{ file.name }}</div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div mat-dialog-actions class="m-0 p-16" fxLayout="row" fxLayoutAlign="end center">
    <button
      mat-button
      class="save-button"
      (click)="matDialogRef.close(selectedFile)"
      [disabled]="!selectedFile"
      [attr.aria-label]="'ACTIONS.CHOOSE_FILE' | translate"
    >
      {{ 'ACTIONS.CHOOSE_FILE' | translate }}
    </button>
    <button
      mat-button
      class="save-button"
      (click)="matDialogRef.close()"
      [attr.aria-label]="'ACTIONS.CLOSE' | translate"
    >
      {{ 'ACTIONS.CLOSE' | translate }}
    </button>
  </div>
</div>
